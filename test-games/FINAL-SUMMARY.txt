================================================================================
        ZIL COMPILER TEST SUITE - COMPLETE AND READY FOR USE
================================================================================

WHAT'S BEEN SET UP
------------------

✓ Downloaded 3 complete Infocom games (Zork I, Zork III, Enchanter)
✓ Downloaded ZILF compiler source and 11 sample games  
✓ Found Planetfall reference files you already have
✓ Verified all reference .z3 files are valid Z-machine format
✓ Created 3 testing/inspection tools
✓ Created comprehensive documentation

TEST CASES AVAILABLE (with both source + compiled .z3)
------------------------------------------------------

1. hello.zil           →  hello.z3 (512 bytes)
   - Simplest possible test (86 bytes of source)
   - Perfect for initial smoke test

2. Zork I              →  zork1.z3 (86,838 bytes)  
   - 14 .zil source files
   - Z3, Release 119, Serial 880429
   - Classic comprehensive test

3. Zork III            →  zork3.z3 (87,984 bytes)
   - Complete game source
   - Another large test case

4. Enchanter           →  enchanter.z3 (111,126 bytes)
   - Z3, Release 29, Serial 860820
   - Different game style

5. Planetfall          →  planetfall.z3 (107,520 bytes)
   - Your target game
   - Reference already in ../games/planetfall/

TOOLS CREATED
-------------

1. verify-zfiles.sh
   - Validates Z-machine file format
   - Shows version, PC, memory layout
   Usage: ./verify-zfiles.sh

2. inspect-zcode.sh
   - Deep analysis of Z-machine bytecode
   - Header inspection
   - Memory layout analysis
   - Binary comparison
   Usage: ./inspect-zcode.sh file1.z3 [file2.z3]

3. compare-zcode.sh
   - Automated test suite
   - Compiles with your compiler
   - Compares against reference
   - Reports differences
   Usage: ./compare-zcode.sh -c /path/to/compiler -t testname

DOCUMENTATION
-------------

README.md           - Overview of all test games
QUICK-START.md      - How to get started testing
TEST-INVENTORY.md   - Detailed test catalog and phases
TESTING-GUIDE.md    - Complete workflow and debugging guide
SUMMARY.txt         - Quick reference
FINAL-SUMMARY.txt   - This file

QUICK START
-----------

Step 1: Verify test suite is ready
    cd test-games
    ./verify-zfiles.sh

Step 2: Test your compiler on hello world
    ./compare-zcode.sh -c /path/to/your-compiler -t hello

Step 3: Inspect any differences
    ./inspect-zcode.sh output_hello.z3 zilf/test/Dezapf.Tests/Resources/hello.z3

Step 4: Test on full game
    ./compare-zcode.sh -c /path/to/your-compiler -t zork1 -v

Step 5: Test on Planetfall
    ./compare-zcode.sh -c /path/to/your-compiler -t planetfall

TESTING PHILOSOPHY
------------------

Don't expect byte-for-byte matches! Even different compiler versions produce
different output. Instead, focus on:

  ✓ Valid Z-machine format
  ✓ Game runs without crashing
  ✓ Game behaves correctly
  ✓ Reasonable file size
  ~ Close to reference structure (nice to have)
  ~ Identical bytes (don't worry about this)

RECOMMENDED PROGRESSION
-----------------------

1. hello.zil (86 bytes)
   Goal: Get basic compilation working
   
2. Zork I (86KB)
   Goal: Handle complex multi-file game
   
3. Planetfall (107KB)  
   Goal: Match your target game

4. All tests
   Goal: Comprehensive validation

TROUBLESHOOTING
---------------

Q: My output is much larger than reference
A: Check for duplicate strings, inefficient code gen

Q: My output is much smaller
A: Missing abbreviations, dictionary, or object table?

Q: Game crashes on start
A: Check initial PC, verify header addresses

Q: Bytes differ but game works
A: This is normal! Layout differences are expected.

Q: Where do I start debugging differences?
A: Use inspect-zcode.sh to compare headers first, then hex dumps

FILES IN THIS DIRECTORY
------------------------

test-games/
├── README.md                       # Overview
├── QUICK-START.md                  # Getting started
├── TEST-INVENTORY.md               # Detailed catalog
├── TESTING-GUIDE.md                # Complete workflow
├── SUMMARY.txt                     # Quick reference
├── FINAL-SUMMARY.txt               # This file
├── compare-zcode.sh                # Automated test suite
├── verify-zfiles.sh                # Validate Z-machine files
├── inspect-zcode.sh                # Bytecode inspector
├── zork1/                          # Zork I source + compiled
│   ├── *.zil                       # 14 source files
│   └── COMPILED/zork1.z3           # Reference binary
├── zork3/                          # Zork III source + compiled
├── enchanter/                      # Enchanter source + compiled
└── zilf/                           # ZILF compiler source
    ├── sample/                     # Sample games
    │   ├── hello/hello.zil
    │   ├── cloak/cloak.zil
    │   ├── beer/beer.zil
    │   ├── dragon/dragon.zil
    │   └── advent/advent.zil
    └── test/Dezapf.Tests/Resources/
        ├── hello.z3                # Minimal reference (512 bytes)
        └── name.z3                 # Small reference (1KB)

PLANETFALL LOCATION
-------------------

Your Planetfall files are in:
    ../games/planetfall/source/*.zil
    ../games/planetfall/source/COMPILED/planetfall.z3 (107KB reference)

The test script knows about this location.

YOU'RE READY TO TEST!
---------------------

Everything is set up. Start with hello.zil and work your way up.

Good luck with your compiler!

================================================================================
